# -*- coding: utf-8 -*-
"""loan prediction deployment.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/13qTvO4K7Gu_yinK5ag445BsGAS1kTSSr
"""
import streamlit as st
import pandas as pd
import joblib

# Load trained model and encoders
model = joblib.load("")
encoders = joblib.load("loan_encoders.pkl")   # dictionary of label encoders

st.title("Loan Prediction App")

# Collect user inputs
gender = st.selectbox("Gender", encoders["Gender"].classes_)
married = st.selectbox("Married", encoders["Married"].classes_)
dependents = st.selectbox("Dependents", encoders["Dependents"].classes_)
education = st.selectbox("Education", encoders["Education"].classes_)
self_employed = st.selectbox("Self Employed", encoders["Self_Employed"].classes_)
applicant_income = st.number_input("Applicant Income", min_value=0)
coapplicant_income = st.number_input("Coapplicant Income", min_value=0)
loan_amount = st.number_input("Loan Amount", min_value=0)
loan_amount_term = st.number_input("Loan Amount Term (months)", min_value=0)

# Credit history is numeric (0 or 1), so no encoder needed
credit_history = st.selectbox("Credit History", [0.0, 1.0])

property_area = st.selectbox("Property Area", encoders["Property_Area"].classes_)

# Create dataframe for prediction
df = pd.DataFrame({
    "Gender": [gender],
    "Married": [married],
    "Dependents": [dependents],
    "Education": [education],
    "Self_Employed": [self_employed],
    "ApplicantIncome": [applicant_income],
    "CoapplicantIncome": [coapplicant_income],
    "LoanAmount": [loan_amount],
    "Loan_Amount_Term": [loan_amount_term],
    "Credit_History": [credit_history],
    "Property_Area": [property_area]
})

# Encode categorical variables using saved encoders
for col in encoders:
    if col in df.columns:   # only encode categorical columns
        df[col] = encoders[col].transform(df[col])

# Predict button
if st.button("Predict Loan Status"):
    prediction = model.predict(df)
    result = "Approved " if prediction[0] == 1 else "Rejected "
    st.success(f"Loan Prediction: {result}")
